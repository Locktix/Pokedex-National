<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pok√©dex National</title>
    <link rel="stylesheet" href="theme-light.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- √âcran de chargement -->
    <div id="loading-container" class="loading-container">
        <div class="loading-card">
            <div class="loading-spinner"></div>
            <h2>üéÆ Pok√©dex National</h2>
            <p>Chargement en cours...</p>
        </div>
    </div>

    <!-- Interface d'authentification -->
    <div id="auth-container" class="auth-container" style="display: none;">
        <div class="auth-card">
            <div class="auth-logo">
                <div class="logo-icon">üéÆ</div>
                <h2>Pok√©dex National</h2>
                <p class="auth-subtitle">Connectez-vous pour sauvegarder votre progression</p>
            </div>
            
            <form id="login-form" class="auth-form">
                <div class="input-group">
                    <input type="email" id="login-email" placeholder="Email" class="auth-input" autocomplete="email" required>
                    <div class="input-icon">üìß</div>
                </div>
                <div class="input-group">
                    <input type="password" id="login-password" placeholder="Mot de passe" class="auth-input" autocomplete="current-password" required>
                    <div class="input-icon">üîí</div>
                </div>
                <button type="submit" id="login-btn" class="auth-btn primary">Se connecter</button>
                <button type="button" id="show-register" class="auth-btn secondary">Cr√©er un compte</button>
            </form>
            
            <form id="register-form" class="auth-form" style="display: none;">
                <div class="input-group">
                    <input type="text" id="register-username" placeholder="Nom d'utilisateur" class="auth-input" autocomplete="username" required>
                    <div class="input-icon">üë§</div>
                </div>
                <div class="input-group">
                    <input type="email" id="register-email" placeholder="Email" class="auth-input" autocomplete="email" required>
                    <div class="input-icon">üìß</div>
                </div>
                <div class="input-group">
                    <input type="password" id="register-password" placeholder="Mot de passe" class="auth-input" autocomplete="new-password" required>
                    <div class="input-icon">üîí</div>
                </div>
                <button type="submit" id="register-btn" class="auth-btn primary">Cr√©er un compte</button>
                <button type="button" id="show-login" class="auth-btn secondary">D√©j√† un compte ?</button>
            </form>
        </div>
    </div>

    <div id="app-container" class="app-container" style="display: none;">
        <!-- Header avec glassmorphism -->
        <header class="glass-header">
            <div class="header-content">
                <div class="user-section">
                    <div class="user-info">
                        <div class="user-avatar">
                            <span class="avatar-icon">üë§</span>
                        </div>
                        <div class="user-details">
                            <span class="user-email" id="user-email"></span>
                            <span id="user-role-badge" class="role-badge"></span>
                        </div>
                    </div>
                    <div class="user-actions">
                        <button id="settings-btn" class="glass-btn settings-btn" title="Param√®tres">
                            <span class="btn-icon">‚öôÔ∏è</span>
                        </button>
                        <button id="logout-btn" class="glass-btn logout-btn">
                            <span class="btn-icon">üö™</span>
                            <span class="btn-text">D√©connexion</span>
                        </button>
                    </div>
                </div>
                
                <div class="title-section">
                    <h1 class="main-title">
                        <span class="title-icon">üéÆ</span>
                        <span class="title-text">Pok√©dex National</span>
                    </h1>
                </div>
                
                <div class="stats-section">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-content">
                                <span class="stat-number" id="captured-count">0</span>
                                <span class="stat-label">Captur√©s</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üéØ</div>
                            <div class="stat-content">
                                <span class="stat-number" id="percentage">0%</span>
                                <span class="stat-label">Compl√©tion</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚è≥</div>
                            <div class="stat-content">
                                <span class="stat-number" id="remaining">1025</span>
                                <span class="stat-label">Restants</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Toolbar avec glassmorphism -->
        <div class="glass-toolbar">
            <div class="toolbar-content">
                <div class="search-section">
                    <div class="search-container">
                        <div class="search-icon">üîç</div>
                        <input type="text" id="search-input" placeholder="Rechercher un Pok√©mon..." class="search-input">
                        <button id="clear-search" class="clear-search-btn" style="display: none;">
                            <span class="clear-icon">‚úï</span>
                        </button>
                    </div>
                    <div id="search-results" class="search-results" style="display: none;"></div>
                </div>
                
                <div class="controls-section">
                    <div class="filter-group">
                        <button id="show-all" class="filter-btn active">
                            <span class="filter-icon">üìã</span>
                            <span class="filter-text">Tous</span>
                        </button>
                        <button id="show-captured" class="filter-btn">
                            <span class="filter-icon">‚úÖ</span>
                            <span class="filter-text">Captur√©s</span>
                        </button>
                    </div>
                    
                    <div class="grid-controls">
                        <div class="grid-size-selector">
                            <label for="grid-size-select" class="grid-label">Taille :</label>
                            <select id="grid-size-select" class="grid-select">
                                <option value="16" selected>4 x 4</option>
                                <option value="9">3 x 3</option>
                                <option value="4">2 x 2</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main content avec glassmorphism -->
        <main class="glass-main">
            <div class="pokemon-grid" id="pokemon-grid">
                <!-- Les Pok√©mon seront g√©n√©r√©s ici -->
            </div>
            
            <div class="pagination-section">
                <div class="pagination-controls">
                    <button id="first-page" class="nav-btn" title="Premi√®re page">
                        <span class="nav-icon">‚èÆ</span>
                    </button>
                    <button id="prev-page" class="nav-btn" title="Page pr√©c√©dente">
                        <span class="nav-icon">‚Üê</span>
                    </button>
                    <div class="page-info">
                        <span class="page-text">Page</span>
                        <span class="page-number" id="current-page">1</span>
                        <span class="page-text">/ 65</span>
                    </div>
                    <button id="next-page" class="nav-btn" title="Page suivante">
                        <span class="nav-icon">‚Üí</span>
                    </button>
                    <div class="goto-section">
                        <input type="number" id="goto-page-input" min="1" max="65" placeholder="Page" class="goto-input">
                        <button id="goto-page-btn" class="nav-btn">
                            <span class="nav-text">Aller</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Bouton pour ouvrir la modale Pok√©dex National -->
        <div class="docs-section">
            <button id="open-pokedex-docs" class="docs-btn">
                <span class="docs-icon">üìÑ</span>
                <span class="docs-text">Pr√©parer son Pok√©dex National</span>
            </button>
        </div>

        <!-- Overlay/Modale Pok√©dex National -->
        <div id="pokedex-docs-modal" class="modal" style="display:none;z-index:2000;">
            <div class="modal-content glass-modal">
                <div class="modal-header">
                    <h2 class="modal-title">
                        <span class="modal-icon">üìÑ</span>
                        <span class="modal-text">Pr√©parer son Pok√©dex National</span>
                    </h2>
                    <button id="close-pokedex-docs" class="close-btn">
                        <span class="close-icon">‚úï</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="modal-description">T√©l√©chargez des outils pour organiser votre collection physique</p>
                    <div class="docs-actions">
                        <a href="https://github.com/Locktix/Pokedex-National/blob/main/assets/pokedex_complet.pdf?raw=true" download="pokedex_national_liste.pdf" class="doc-btn primary">
                            <span class="doc-icon">‚¨áÔ∏è</span>
                            <span class="doc-text">T√©l√©charger la liste des Pok√©mon (PDF)</span>
                        </a>
                        <button id="choose-binder-btn" class="doc-btn secondary">
                            <span class="doc-icon">üõí</span>
                            <span class="doc-text">Choisir un classeur 4x4</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sous-modale pour choix du classeur -->
        <div id="binder-choice-modal" class="modal" style="display:none;z-index:2100;">
            <div class="modal-content glass-modal">
                <div class="modal-header">
                    <h3 class="modal-title">
                        <span class="modal-icon">üõí</span>
                        <span class="modal-text">Choisir un classeur 4x4</span>
                    </h3>
                    <button id="close-binder-choice" class="close-btn">
                        <span class="close-icon">‚úï</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="modal-description">S√©lectionnez votre classeur pr√©f√©r√© :</p>
                    <div class="binder-options">
                        <a href="https://amzn.eu/d/fpM8c9d" target="_blank" rel="noopener" class="binder-option premium">
                            <span class="binder-icon">‚≠ê</span>
                            <span class="binder-text">Amazon ‚Äì Classeur premium (‚âà 50-60‚Ç¨)</span>
                        </a>
                        <a href="https://fr.aliexpress.com/item/1005009205993851.html" target="_blank" rel="noopener" class="binder-option economy">
                            <span class="binder-icon">üí∞</span>
                            <span class="binder-text">AliExpress ‚Äì Classeur √©conomique (‚âà 20-25‚Ç¨)</span>
                        </a>
                    </div>
                    <div class="binder-disclaimer">
                        <span class="disclaimer-text">(Prix indicatifs, liens non sponsoris√©s)</span>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="glass-footer">
            <span class="footer-text">Pok√©dex National &copy; 2025 ‚Äì par Locktix</span>
        </footer>
    </div>

    <!-- Modal des param√®tres -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content glass-modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">‚öôÔ∏è</span>
                    <span class="modal-text">Param√®tres</span>
                </h3>
                <button id="close-settings" class="close-btn">
                    <span class="close-icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Section Admin (visible uniquement pour les admins) -->
                <div id="admin-settings" class="settings-section" style="display: none;">
                    <h4 class="section-title">
                        <span class="section-icon">üëë</span>
                        <span class="section-text">Administration</span>
                    </h4>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            <span class="setting-icon">üìä</span>
                            <span class="setting-text">Statistiques globales</span>
                        </label>
                        <button id="view-global-stats" class="admin-btn">
                            <span class="btn-icon">üëÅÔ∏è</span>
                            <span class="btn-text">Voir les stats</span>
                        </button>
                    </div>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            <span class="setting-icon">üë•</span>
                            <span class="setting-text">Gestion des utilisateurs</span>
                        </label>
                        <button id="manage-users" class="admin-btn">
                            <span class="btn-icon">‚öôÔ∏è</span>
                            <span class="btn-text">G√©rer les utilisateurs</span>
                        </button>
                    </div>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            <span class="setting-icon">üîß</span>
                            <span class="setting-text">Mode maintenance</span>
                        </label>
                        <input type="checkbox" id="maintenance-mode" class="toggle-switch">
                    </div>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            <span class="setting-icon">üìà</span>
                            <span class="setting-text">Export des donn√©es</span>
                        </label>
                        <button id="export-data" class="admin-btn">
                            <span class="btn-icon">üì•</span>
                            <span class="btn-text">Exporter JSON</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal des statistiques globales -->
    <div id="stats-modal" class="modal" style="display: none;">
        <div class="modal-content glass-modal stats-modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">üìä</span>
                    <span class="modal-text">Statistiques Globales</span>
                </h3>
                <button id="close-stats" class="close-btn">
                    <span class="close-icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="stats-content">
                    <p class="loading-text">Chargement des statistiques...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de gestion des utilisateurs -->
    <div id="users-modal" class="modal" style="display: none;">
        <div class="modal-content glass-modal users-modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">üë•</span>
                    <span class="modal-text">Gestion des Utilisateurs</span>
                </h3>
                <button id="close-users" class="close-btn">
                    <span class="close-icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="users-search-bar">
                    <div class="search-input-wrapper">
                        <input type="text" id="users-search-input" placeholder="Rechercher par nom, email ou r√¥le..." autocomplete="off" class="users-search-input">
                        <span class="users-search-icon">üîç</span>
                    </div>
                </div>
                <div class="users-cards-container">
                    <div id="users-table-root" class="users-cards-grid">
                        <!-- Les cartes utilisateurs seront g√©n√©r√©es ici -->
                    </div>
                </div>
                <div id="users-empty-message" style="display:none;" class="empty-message">
                    <span class="empty-icon">üîç</span>
                    <span class="empty-text">Aucun utilisateur trouv√©.</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de collection d'utilisateur (admin) -->
    <div id="user-collection-modal" class="modal" style="display: none;">
        <div class="modal-content glass-modal user-collection-modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span class="modal-icon">üÉè</span>
                    <span class="modal-text">Collection de <span id="collection-username"></span></span>
                </h3>
                <div id="collection-stats" class="collection-stats-badges"></div>
                <button id="close-collection" class="close-btn">
                    <span class="close-icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="user-collection-grid" class="pokemon-grid"></div>
                <div id="user-collection-empty" style="display:none;" class="empty-message">
                    <span class="empty-icon">üé£</span>
                    <span class="empty-text">Aucun Pok√©mon captur√©.</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA3h1yaax-uNxAN0P83ZGecQbWYtzvsyA8",
            authDomain: "pokemon-challenge-e865d.firebaseapp.com",
            projectId: "pokemon-challenge-e865d",
            storageBucket: "pokemon-challenge-e865d.firebasestorage.app",
            messagingSenderId: "954666705688",
            appId: "1:954666705688:web:d0f539c5494e35c34af46d",
            measurementId: "G-JML8B9SHK7"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        // Make Firebase available globally
        window.auth = auth;
        window.db = db;
        window.analytics = analytics;
    </script>
    <script src="script.js"></script>
</body>
</html> 